<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>###Breathe###</title>
    <style>
        body {
            height: 100vh;
            margin: 0;
        }

        #outlet {
            height: 100%;
        }
    </style>
    <!-- index.ts is included here automatically (either by the dev server or during the build) -->
    <script src="https://cdn.jsdelivr.net/npm/@lightningchart/lcjs@6.0.3/dist/lcjs.iife.js"></script>
    <script>
    const { lightningChart } = lcjs;

    let charts = {}; // Oggetto per memorizzare i grafici

    function initLineChart(name) {
        if (charts[name]) {
            // Se il grafico esiste già, non fare nulla
            console.warn(`Il grafico con il nome "${name}" esiste già.`);
            return;
        }

        const lc = lightningChart({
            license: "0002-n96ucKX1C700BOZwz7IAGHHjEuT4KwDfrkmx7QCyIBztfxcK2B2YdzqRkuyh0bv4JWu/viN/aCm4HYmBbVnGHphV-MEUCIQCoAbM5nVG3lu6EAeoZcsrvewNpdn+DEGKL6UpNeDXEbAIgCV8gVBAZ3XKPAkbuQDarCfg/BnBK4sN+L00cqoYMu5E=",
            licenseInformation: {
                appTitle: "LightningChart JS Trial",
                company: "LightningChart Ltd."
            },
        });

        // Crea il grafico e memorizza le informazioni nel dizionario
        const chart = lc.ChartXY();
        const series = chart.addLineSeries();
        const dataPoints = [];

        // Aggiungi il grafico al dizionario
        charts[name] = {
            chart: chart,
            series: series,
            dataPoints: dataPoints
        };
    }

    function updateLineChart(name, x, y) {
        const chartData = charts[name];
        if (!chartData) {
            console.warn(`Il grafico con il nome "${name}" non esiste.`);
            return;
        }

        // Aggiungi il nuovo punto all'array
        chartData.dataPoints.push({ x: x, y: y });

        // Mantieni solo gli ultimi 200 punti
        if (chartData.dataPoints.length > 200) {
            chartData.dataPoints.shift(); // Rimuovi il primo elemento
        }

        // Aggiorna la serie con i dati più recenti
        chartData.series.clear(); // Cancella i dati esistenti nella serie
        chartData.series.add(chartData.dataPoints); // Aggiungi i dati aggiornati alla serie

        console.log(`Aggiornato il grafico "${name}" con il punto x: ${x}`);
    }

  </script>
</head>
<body>
    <div id="outlet"></div>
</body>
</html>
